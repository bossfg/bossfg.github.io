(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1696:e=>{e.exports={container:"StockInfo_container__eOTax",wrapper:"StockInfo_wrapper___EpDZ",contentCard:"StockInfo_contentCard__qYur6",header:"StockInfo_header__YJBgL",title:"StockInfo_title__Plzqc",flagContainer:"StockInfo_flagContainer__IzS9e",flagImage:"StockInfo_flagImage__MaimR",subtitle:"StockInfo_subtitle__4RyL3",sectionTitle:"StockInfo_sectionTitle__rnoXP",tableContainer:"StockInfo_tableContainer__dmnTP",table:"StockInfo_table__IeEPi",tableHead:"StockInfo_tableHead__HSYGW",tableHeaderCell:"StockInfo_tableHeaderCell__6R5kV",tableBody:"StockInfo_tableBody__7UGAd",tableRow:"StockInfo_tableRow__AxRBM",tableCell:"StockInfo_tableCell__ORd_1",previewRow:"StockInfo_previewRow__tGEhQ",form:"StockInfo_form__jp1CZ",formGroup:"StockInfo_formGroup__8fY7L",label:"StockInfo_label__LwW9q",input:"StockInfo_input__yrHZE",buttonContainer:"StockInfo_buttonContainer__b2r9M",buttonGroup:"StockInfo_buttonGroup__anfT1",button:"StockInfo_button__wr6m9",buttonPrimary:"StockInfo_buttonPrimary__NxxHr",buttonSuccess:"StockInfo_buttonSuccess__vRYgN",buttonPurple:"StockInfo_buttonPurple__Kv_3x",modal:"StockInfo_modal__sheY_",modalContent:"StockInfo_modalContent__ipk3Y",modalHeader:"StockInfo_modalHeader__y_qaq",modalTitle:"StockInfo_modalTitle__kqRq4",closeButton:"StockInfo_closeButton__QSRPK",imageContainer:"StockInfo_imageContainer__psHAD",previewImage:"StockInfo_previewImage__PVboT",modalFooter:"StockInfo_modalFooter__mDb7Z"}},6414:(e,t,l)=>{"use strict";l.d(t,{default:()=>i});var a=l(5155),n=l(2115),o=l(6766),c=l(1696),s=l.n(c);function i(){let[e,t]=(0,n.useState)([]),[l,c]=(0,n.useState)({companyName:"",event:"",infoDiff:""}),[i,r]=(0,n.useState)(null),[f,d]=(0,n.useState)(null),[m,_]=(0,n.useState)(!1),h=(0,n.useRef)(null),u=new Date,b=u.getMonth()+1,x=u.getDate();(0,n.useEffect)(()=>{l.companyName||l.event||l.infoDiff?r(l):r(null)},[l]);let p=e=>{let{name:t,value:l}=e.target;c(e=>({...e,[t]:l}))},N=async()=>{try{let t=document.createElement("canvas"),l=t.getContext("2d");if(!l)return alert("无法创建 Canvas 上下文"),null;if(t.width=800,t.height=200+(e.length+ +!!i)*50,l.fillStyle="#ffffff",l.fillRect(0,0,t.width,t.height),l.fillStyle="#000000",l.font="bold 24px Arial",l.fillText("".concat(b,"月").concat(x,"日"),40,50),l.font="bold 20px Arial",l.fillText("马股信息差",t.width-150,50),l.font="18px Arial",l.fillText("今天这些公司有大事件",40,100),l.fillStyle="#1f2937",l.fillRect(40,120,t.width-80,40),l.fillStyle="#ffffff",l.font="bold 16px Arial",l.fillText("公司名称",60,145),l.fillText("事件",300,145),l.fillText("信息差",540,145),l.fillStyle="#000000",l.font="16px Arial",e.forEach((e,a)=>{let n=180+50*a;l.fillStyle=a%2==0?"#f9fafb":"#ffffff",l.fillRect(40,n-25,t.width-80,50),l.fillStyle="#000000",l.fillText(e.companyName,60,n),l.fillText(e.event,300,n),l.fillText(e.infoDiff,540,n)}),i){let a=180+50*e.length;l.fillStyle="#eff6ff",l.fillRect(40,a-25,t.width-80,50),l.fillStyle="#000000",l.fillText(i.companyName,60,a),l.fillText(i.event,300,a),l.fillText(i.infoDiff,540,a)}return l.strokeStyle="#e5e7eb",l.lineWidth=1,l.strokeRect(40,120,t.width-80,40+(e.length+ +!!i)*50),l.beginPath(),l.moveTo(240,120),l.lineTo(240,160+(e.length+ +!!i)*50),l.stroke(),l.beginPath(),l.moveTo(480,120),l.lineTo(480,160+(e.length+ +!!i)*50),l.stroke(),t.toDataURL("image/png")}catch(t){console.error("生成图片失败:",t);let e="未知错误";return t instanceof Error?(e="".concat(t.name,": ").concat(t.message),t.stack&&console.error("错误堆栈:",t.stack)):e=String(t),alert("生成图片失败: ".concat(e)),null}},S=async()=>{let e=await N();e&&(d(e),_(!0))},k=async()=>{let e=await N();if(e){let t=document.createElement("a");t.href=e,t.download="马股信息差_".concat(b,"月").concat(x,"日.png"),t.click()}};return(0,a.jsxs)("div",{className:s().container,children:[(0,a.jsxs)("div",{className:s().wrapper,children:[(0,a.jsxs)("div",{ref:h,className:s().contentCard,children:[(0,a.jsxs)("div",{className:s().header,children:[(0,a.jsxs)("h1",{className:s().title,children:[b,"月",x,"日"]}),(0,a.jsxs)("div",{className:s().flagContainer,children:[(0,a.jsx)(o.default,{src:"/malaysia-flag.png",alt:"Malaysia Flag",className:s().flagImage,width:32,height:16}),(0,a.jsx)("h2",{className:s().subtitle,children:"马股信息差"})]})]}),(0,a.jsx)("h3",{className:s().sectionTitle,children:"今天这些公司有大事件"}),(0,a.jsx)("div",{className:s().tableContainer,children:(0,a.jsxs)("table",{className:s().table,children:[(0,a.jsx)("thead",{className:s().tableHead,children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:s().tableHeaderCell,children:"公司名称"}),(0,a.jsx)("th",{className:s().tableHeaderCell,children:"事件"}),(0,a.jsx)("th",{className:s().tableHeaderCell,children:"信息差"})]})}),(0,a.jsxs)("tbody",{className:s().tableBody,children:[e.map((e,t)=>(0,a.jsxs)("tr",{className:s().tableRow,children:[(0,a.jsx)("td",{className:s().tableCell,children:e.companyName}),(0,a.jsx)("td",{className:s().tableCell,children:e.event}),(0,a.jsx)("td",{className:s().tableCell,children:e.infoDiff})]},t)),i&&(0,a.jsxs)("tr",{className:s().previewRow,children:[(0,a.jsx)("td",{className:s().tableCell,children:i.companyName}),(0,a.jsx)("td",{className:s().tableCell,children:i.event}),(0,a.jsx)("td",{className:s().tableCell,children:i.infoDiff})]})]})]})})]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l.companyName&&l.event&&l.infoDiff&&(t(e=>[...e,l]),c({companyName:"",event:"",infoDiff:""}),r(null))},className:s().form,children:[(0,a.jsxs)("div",{className:s().formGroup,children:[(0,a.jsx)("label",{className:s().label,children:"公司名称"}),(0,a.jsx)("input",{type:"text",name:"companyName",value:l.companyName,onChange:p,className:s().input,title:"输入公司名称",placeholder:"请输入公司名称"})]}),(0,a.jsxs)("div",{className:s().formGroup,children:[(0,a.jsx)("label",{className:s().label,children:"事件"}),(0,a.jsx)("input",{type:"text",name:"event",value:l.event,onChange:p,className:s().input,title:"输入事件",placeholder:"请输入事件"})]}),(0,a.jsxs)("div",{className:s().formGroup,children:[(0,a.jsx)("label",{className:s().label,children:"信息差"}),(0,a.jsx)("input",{type:"text",name:"infoDiff",value:l.infoDiff,onChange:p,className:s().input,title:"输入信息差",placeholder:"请输入信息差"})]}),(0,a.jsxs)("div",{className:s().buttonContainer,children:[(0,a.jsx)("button",{type:"submit",className:"".concat(s().button," ").concat(s().buttonPrimary),children:"添加条目"}),(0,a.jsxs)("div",{className:s().buttonGroup,children:[(0,a.jsx)("button",{type:"button",onClick:S,className:"".concat(s().button," ").concat(s().buttonPurple),children:"预览图片"}),(0,a.jsx)("button",{type:"button",onClick:k,className:"".concat(s().button," ").concat(s().buttonSuccess),children:"导出图片"})]})]})]})]}),m&&f&&(0,a.jsx)("div",{className:s().modal,children:(0,a.jsxs)("div",{className:s().modalContent,children:[(0,a.jsxs)("div",{className:s().modalHeader,children:[(0,a.jsx)("h3",{className:s().modalTitle,children:"图片预览"}),(0,a.jsx)("button",{onClick:()=>{_(!1),d(null)},className:s().closeButton,children:"关闭"})]}),(0,a.jsx)("div",{className:s().imageContainer,children:(0,a.jsx)(o.default,{src:f,alt:"预览图片",className:s().previewImage,width:800,height:600,unoptimized:!0})}),(0,a.jsx)("div",{className:s().modalFooter,children:(0,a.jsx)("button",{onClick:k,className:"".concat(s().button," ").concat(s().buttonSuccess),children:"下载图片"})})]})})]})}},7839:(e,t,l)=>{Promise.resolve().then(l.bind(l,6414))}},e=>{var t=t=>e(e.s=t);e.O(0,[587,766,441,684,358],()=>t(7839)),_N_E=e.O()}]);